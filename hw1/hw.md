## Схемы

- [eventstorming](./mcf_eventstorming.pdf)
- [data model](./dm.pdf)
- [communications](./communications.png)
- [structure](./structure.png)

## Разделение на сервисы
### 1. Matching
Этот сервис живёт в своей доменной модели — ubiquitous language («эталонные» и «обычные образцы»), логика подбора и набор шагов, которые нужно динамически конфигурировать.  
Команда матчинга хочет тестировать гипотезы и менять поведение без влияния на остальную систему. Дополнительно, логика будет написана на любом языке (какой мы не знаем), что дает возможность развиваться независимо.

### 2. Hiring
Поток заявок от котов-кандидатов (до **1 000 в день**) и риск DDoS делают этот сервис точкой с высокой нагрузкой.  
Выделение отдельного сервиса позволяет **масштабировать** его независимо от остальной системы и **защитить** другие части от перегрузок.

### 3. OMS + Assembly (в одном монолите)
OMS (Order Management System) управляет заказами, а Assembly — работой отдела расходников.  
Они используют одни и теже сущности, их тесная связь делает **монолитную реализацию более простой и надёжной**, без избыточных коммуникаций между ними.

### 4. Billing
Этот сервис живёт в своей доменной модели — ubiquitous language (аккаунт, транзакция, инвойс), правила расчетов, выплат и оплат.  
Отделение от других сервисов делает биллинг **независимым, устойчивым и быстрым**, а также позволяет гарантировать целостность финансовых данных.

## Выбор коммуникаций (стриминг и бизнес-события)
Ни в одном требовании нет сценариев, где система должна реагировать мгновенно — допустима небольшая задержка.  
Асинхронные коммуникации дают:
- низкий coupling между сервисами;  
- устойчивость к временным сбоям;  
- независимую эволюцию доменов;

## Критичные и спорные места

### Matching
Чёрный ящик, возможно, потребуется синхронный вызов.

### Бонусы воркерам
Механизм начисления средств воркерам (ручное, менеджером) был размещён в **монолите (OMS + Assembly)**. Функционально ближе к операционным процессам, не хотел стримить менеджеров в биллинг и делать это там, выносить в отдельный сервис - нецелесообразно.
